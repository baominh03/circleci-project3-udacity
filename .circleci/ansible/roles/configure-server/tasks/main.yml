# Refer: https://learn.udacity.com/nanodegrees/nd9991/parts/cd0649/lessons/289b664b-435d-42d6-9a00-a80dc789a2fd/concepts/5800a42c-b8ba-4a4d-bb1f-4f1e71da8e91
# https://knowledge.udacity.com/questions/711557
---
- name: 'upgrade packages.'
  become: true
  apt:
      upgrade: 'yes'

- name: 'install dependencies.'
  become: true
  apt:
      name: ['nodejs', 'npm']
      state: latest
      update_cache: yes

- name: Install nodejs
  become: true
  shell: |
    apt-get install -y build-essential
    apt-get install -y curl openssl libssl-dev
    curl -sL https://deb.nodesource.com/setup_12.x | bash -
    apt-get install -y nodejs

- name: 'install pm2'
  become: true
  npm:
      name: pm2
      global: yes
      production: yes
      state: present